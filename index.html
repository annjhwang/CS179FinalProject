<!DOCTYPE html>
<html>
<head>
    <title>CheckIn</title>
    <!--update view based on the device-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--get jquery mobile libraries and css-->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

    <script src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>    

    <link rel="stylesheet" href="css/style.css">

    <script src='https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.css' rel='stylesheet' />

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

     <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>

</head>
<body>

 <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header ">
        <header class="mdl-layout__header">
        <div class="mdl-layout__header-row mdl-color--blue">
            
        <!-- Title -->
        <span class="mdl-layout-title">CheckIn</span>
        <!-- Add spacer, to align navigation to the right -->
        <div class="mdl-layout-spacer "></div>
        <!-- Navigation. We hide it in small screens. -->
       
        </div>
        </header>
        <div class="mdl-layout__drawer ">
            <span class="mdl-layout-title">CheckIn</span>
            <nav class="mdl-navigation ">
            <a class="mdl-navigation__link" href="" disabled>Profile</a>
            <a href="../settings/index.html" class="mdl-navigation__link settings" >Settings</a>
            </nav>
        </div>


        <main class="mdl-layout__content">
            <div class="page-content"><!-- Your content goes here -->
            <button class="mdl-button mdl-button--raised mdl-js-button mdl-js-ripple-effect dialog-button mdl-color--red mdl-color-text--white">SOS</button>


                      <div class="mdl-tabs mdl-js-tabs">
        <div class="mdl-tabs__tab-bar">
            <a href="#tab1" class="mdl-tabs__tab map-tab is-active">Map</a>
            <a href="#tab2" class="mdl-tabs__tab">Chat</a>
        </div>
        <div class="mdl-tabs__panel is-active" id="tab1">
            <div id='map'></div>

            <div class="mdl-grid">
                <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color--green mdl-color-text--white">I'm Ok</a>
                <div class="mdl-layout-spacer"></div>
                <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color--pink mdl-color-text--white">Group Check In</a>
                 <div class="mdl-layout-spacer"></div>
                <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color--purple mdl-color-text--white">Check Out</a>
            </div>


            

        </div>
        <div class="mdl-tabs__panel" id="tab2">
                <div class="messageArman">
                    <a href="alicechat.html">  <img src="pics/alice.png" alt="alice" style="float:left;width:33px"> </a>
                    <span class='username'> <b>Alice: </b> </span> Has anyone seen Annie? 
                </div>

                <div class='messageUpdate'>
                    Gabe checked in at 6:42PM.
                </div>
                

                <div class="messageArman">
                    <a href="gabechat.html">  <img src="pics/gabe.png" alt="gabe" style="float:left;width:33px"> </a>
                    <span class='username'> <b>Gabe: </b> </span> No, let's ask her to CheckIn. 
                </div>

                <div class='messageUpdate'>
                    Alice checked in at 6:59PM.
                </div>
                <div class="messageAnnie">
                    <a href="armanchat.html"> <img src="pics/arman.png" alt="arman" style="float:right;width:33px"></a>
                    <span class='username'> <b>Arman:</b> </span>  Ok, I'll ask her
                </div>

                <img src="pics/keyboard2.png" style="margin:auto; float:left; vertical-align: center; width:99%" alt="keyboard"> 
        </div>
    </div>


<dialog id="dialog" class="mdl-dialog">
    
  <h3 class="mdl-dialog__title">SOS</h3>
  <div class="mdl-dialog__content">
    
  </div>
  <div class="mdl-dialog__actions">
    <button type="button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color--green mdl-color-text--white">Can someone find me?</button>

    <div class="mdl-layout-spacer"></div>

    <button type="button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color--orange mdl-color-text--white">Hey guys, I need help!</button>
    <div class="mdl-layout-spacer"></div>

    <button type="button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color--red mdl-color-text--white">Call 911 + Send location</button>
    <div class="mdl-layout-spacer"></div>
    
    <button type="button" id="close" class="mdl-button mdl-js-button mdl-js-ripple-effect">Close</button>
    </div>
  
</dialog>


<script>
    (function() {
        'use strict';
        var dialogButton = document.querySelector('.dialog-button');
        var dialog = document.querySelector('#dialog');
        if (! dialog.showModal) {
        dialogPolyfill.registerDialog(dialog);
        }
        dialogButton.addEventListener('click', function() {
        dialog.showModal();
        });
        dialog.querySelector('#close')
        .addEventListener('click', function() {
        dialog.close();
        });
    }());




    function initMap() {
        var myLatLng = {lat: 42.374546, lng: -71.118673};

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 15,
          center: myLatLng
        });

        /*
        var marker = new google.maps.Marker({
          position: myLatLng,
          map: map,
          title: 'Hello World!'
        });
        */

        //add locations
             var locations = [
                 ['Gabe', 42.369607, -71.116871,'pics/gabe.png','gabechat.html'],
                 ['Arman', 42.378716, -71.116919,'pics/arman.png','armanchat.html'],
                 ['Alice', 42.374848, -71.122498,'pics/alice.png','alicechat.html'],
                 ['Annie', 42.374636, -71.116550,'pics/annie.png','anniechat.html']
             ];
             //declare marker call it 'i'
             var marker, i;
             //declare infowindow
             var infowindow = new google.maps.InfoWindow();
             //add marker to each locations
             for (i = 0; i < locations.length; i++) {
                 marker = new google.maps.Marker({
                     position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                     map: map,
                     icon: {
                         "url": locations[i][3],
                         "scaledSize": new google.maps.Size(35,35)
                     },
                     url: locations[i][4]

                });
            //click function to marker, pops up infowindow
             google.maps.event.addListener(marker, 'click', (function(marker, i) {
                 return function() {
                     infowindow.setContent(locations[i][0]);
                     infowindow.open(map, marker);
                     window.location.href = this.url;
                 }
             })(marker, i));

             }

             

      }
</script>


<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCDqVROzmpbhvxjKbFb8VBvfuUqZaD57gU&callback=initMap">
    </script>


</body>
</html>
